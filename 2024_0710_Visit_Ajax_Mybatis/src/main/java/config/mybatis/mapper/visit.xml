<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="visit">
	<!-- 전체 조회 -->
	<select id="visit_list" resultType="visit">
		select 
			rownum as no, v.*
		from 
			(select * from visit order by idx desc) v
	</select>
	
	<!-- 추가 
		 parameter가 객체(VisitVo)로 전달되면 mybatis parameter 변수는
		 VO내의 속성명을 이용할 수 있다.
	-->
	<insert id="visit_insert" parameterType="db.vo.VisitVo">
		insert into visit values(
		                         seq_visit_idx.nextVal,
		                         #{ name },
		                         #{ content },
		                         #{ pwd },
		                         #{ ip },
		                         sysdate
		                         )
	</insert>
	
	<!-- 삭제 -->
	<delete id="visit_delete" parameterType="int">
		delete from visit where idx= #{ idx }
	</delete>
	
	<!-- 한개 조회 -->
	<select id="visit_one" resultType="db.vo.VisitVo" parameterType="int">
		select * from visit_view where idx = #{ idx }
	</select>
	
	<!-- 수정하기 -->
	<update id="visit_update" parameterType="db.vo.VisitVo">
		update visit set name = #{ name },
		                 content = #{ content },
		                 pwd = #{ pwd },
		                 ip = #{ ip },
		                 regdate = sysdate
		                 where idx = #{ idx }
	</update>
	

</mapper>













