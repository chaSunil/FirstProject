<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="items">

	<select id="items_list" resultType="vo.ItemsVo">
		select * from trade_order_by_view
	</select>

	<select id="items_list2" resultType="items" parameterType="String">
		select * from trade_order_by_view where option_name1 = #{ item_name } and item_o1_val>=#{ item_name_val }
		or option_name2 = #{ item_name } and item_o2_val>=#{ item_name_val }
		or option_name3 = #{ item_name } and item_o3_val>=#{ item_name_val }
		or option_name4 = #{ item_name } and item_o4_val>=#{ item_name_val }
		or option_name5 = #{ item_name } and item_o5_val>=#{ item_name_val }
		or option_name6 = #{ item_name } and item_o6_val>=#{ item_name_val }
		or option_name7 = #{ item_name } and item_o7_val>=#{ item_name_val }
		<!-- 만약 옵션값이 2개가 들어왔다면. -->
		<if test="_parameter == 'item_name2'">
		or option_name1 = #{ item_name2 } and item_o1_val>=#{ item_name_val2 }
		or option_name2 = #{ item_name2 } and item_o2_val>=#{ item_name_val2 }
		or option_name3 = #{ item_name2 } and item_o3_val>=#{ item_name_val2 }
		or option_name4 = #{ item_name2 } and item_o4_val>=#{ item_name_val2 }
		or option_name5 = #{ item_name2 } and item_o5_val>=#{ item_name_val2 }
		or option_name6 = #{ item_name2 } and item_o6_val>=#{ item_name_val2 }
		or option_name7 = #{ item_name2 } and item_o7_val>=#{ item_name_val2 }
		
		</if>
	</select>
	
	<select id="items_list_option" resultType="items">
		select item_o1 as option_name1 from options
	</select>
</mapper>












